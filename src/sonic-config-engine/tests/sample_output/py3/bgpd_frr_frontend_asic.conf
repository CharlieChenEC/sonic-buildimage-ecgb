!
! template: bgpd/bgpd.conf.j2
!
!
! =========== Managed by sonic-cfggen DO NOT edit manually! ====================
! generated by templates/quagga/bgpd.conf.j2 with config DB data
! file: bgpd.conf
!
!
! template: common/daemons.common.conf.j2
!
hostname multi_npu_platform_01
password zebra
enable password zebra
!
log syslog informational
log facility local4
!
! end of template: common/daemons.common.conf.j2!
agentx
!
!
!
! template: bgpd/bgpd.main.conf.j2
!
! bgp multiple-instance
!
! BGP configuration
!
! TSA configuration
!
ip prefix-list PL_LoopbackV4 permit 10.1.0.32/32
!
ipv6 prefix-list PL_LoopbackV6 permit fc00:1::/64
!
!
ip prefix-list V4_P2P_IP permit 0.0.0.0/0 ge 31 le 31
!
ipv6 prefix-list V6_P2P_IP permit ::/0 ge 126 le 126
!
route-map V4_CONNECTED_ROUTES permit 10
  match ip address prefix-list V4_P2P_IP
  call HIDE_INTERNAL
!
route-map V6_CONNECTED_ROUTES permit 10
  match ipv6 address prefix-list V6_P2P_IP
  call HIDE_INTERNAL
!
route-map HIDE_INTERNAL permit 10
  set community no-export
!
!
router bgp 65100
!
  bgp log-neighbor-changes
  no bgp default ipv4-unicast
  no bgp ebgp-requires-policy
!
  bgp bestpath as-path multipath-relax
!
!
  bgp router-id 10.1.0.32
!
  network 10.1.0.32/32
  network 8.0.0.0/32 route-map HIDE_INTERNAL
!
  address-family ipv6
    network fc00:1::32/64
  exit-address-family
  address-family ipv6
    network fd00:1::32/128 route-map HIDE_INTERNAL
  exit-address-family
!
!
!
  address-family ipv4
    redistribute connected route-map V4_CONNECTED_ROUTES
  exit-address-family
  address-family ipv6
    redistribute connected route-map V6_CONNECTED_ROUTES
  exit-address-family
!
  address-family ipv4
    maximum-paths 64
  exit-address-family
  address-family ipv6
    maximum-paths 64
  exit-address-family
!
! end of template: bgpd/bgpd.main.conf.j2
!!
!
!
! bgp multiple-instance
!
route-map FROM_BGP_SPEAKER_V4 permit 10
!
route-map TO_BGP_SPEAKER_V4 deny 10
!
ip prefix-list PL_LoopbackV4 permit 10.1.0.32/32
ipv6 prefix-list PL_LoopbackV6 permit fc00:1::/64
!
!
route-map TO_BGP_PEER_V4 permit 100
!
route-map TO_BGP_PEER_V6 permit 100
!
!
route-map ISOLATE permit 10
  set as-path prepend 65100
!
route-map set-next-hop-global-v6 permit 10
  set ipv6 next-hop prefer-global
!
router bgp 65100
  bgp log-neighbor-changes
  bgp bestpath as-path multipath-relax
  no bgp default ipv4-unicast
  bgp graceful-restart restart-time 240
  bgp graceful-restart
  bgp router-id 8.0.0.0
  network 8.0.0.0/32
  address-family ipv6
    network fd00:1::32/64
  exit-address-family
  address-family ipv4
    maximum-paths 64
  exit-address-family
  address-family ipv6
    maximum-paths 64
  exit-address-family
  neighbor PEER_V4 peer-group
  neighbor PEER_V6 peer-group
  address-family ipv4
    neighbor PEER_V4 soft-reconfiguration inbound
    neighbor PEER_V4 route-map TO_BGP_PEER_V4 out
  exit-address-family
  address-family ipv6
    neighbor PEER_V6 soft-reconfiguration inbound
    neighbor PEER_V6 route-map TO_BGP_PEER_V6 out
  exit-address-family
!
!
! end of template: bgpd/bgpd.conf.j2
!
